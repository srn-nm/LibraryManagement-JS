# Library Management System

## مراحل کاری پروژه

### 1. تنظیم و بررسی احراز هویت
- ساخت فایل `auth.js` برای مدیریت کوکی و توکن JWT.
- بررسی کاربر لاگین شده و جلوگیری از دسترسی به صفحات محافظت شده.
- هدایت کاربران لاگین نشده به صفحه `login.html`.

### 2. پیاده‌سازی صفحه ورود (login.html)
- ایجاد فرم ورود با ایمیل و پسورد.
- ارسال درخواست به API `/auth/login`.
- ذخیره توکن JWT در کوکی برای استفاده در صفحات دیگر.
- مدیریت خطاهای ورود و نمایش پیام مناسب به کاربر.

### 3. پیاده‌سازی داشبورد (dashboard.html)
- گرفتن اطلاعات کاربر از API `/auth/me`.
- نمایش نام کاربر و تصویر اولیه در بالای صفحه.
- نمایش آمار: تعداد وام‌های فعال، کتاب‌های موجود و غیره.
- مدیریت دکمه خروج (logout) و پاک‌سازی کوکی و `localStorage`.

### 4. پیاده‌سازی صفحه کتاب‌ها (books.html)
- دریافت لیست کتاب‌ها از API `/books`.
- ذخیره وام‌های کاربر در `localStorage` برای بررسی وضعیت Borrowed.
- نمایش کارت کتاب‌ها با اطلاعات اصلی (عنوان، نویسنده، دسته‌بندی، موجودی).
- نمایش دکمه Borrow/Not Available/Borrowed بر اساس وضعیت کتاب و وام کاربر.
- افزودن دکمه View Details برای رفتن به صفحه جزئیات هر کتاب.

### 5. پیاده‌سازی جزئیات کتاب (book.html)
- دریافت اطلاعات تک‌تک کتاب‌ها با API `/books/:id`.
- نمایش کامل جزئیات کتاب: عنوان، نویسنده، دسته‌بندی، توضیحات، سال انتشار، تعداد کل و موجودی.
- بررسی اینکه آیا کتاب توسط کاربر قبلاً امانت گرفته شده (`isThisBookAlreadyBorrowedByMe`).
- تغییر وضعیت دکمه Borrow به Borrowed یا Not Available.

### 6. پیاده‌سازی صفحه وام‌ها (myloans.html)
- دریافت وام‌های فعال و بازگشتی کاربر از API `/loans/my-loans`.
- نمایش لیست وام‌ها در جدول همراه با وضعیت Active/Returned.
- افزودن دکمه Return برای بازگرداندن کتاب‌ها و بروزرسانی وضعیت در `localStorage`.

### 7. مدیریت خطا و صفحه 404
- ایجاد فایل `notfound.html` برای نمایش خطای Page Not Found.
- هدایت کاربر به این صفحه در صورت وارد کردن لینک اشتباه یا غیر موجود.
- افزودن دکمه بازگشت به داشبورد.

### 8. بهینه‌سازی و معماری کد
- ایجاد توابع مشترک (`getCookie`, `apiFetch`) برای جلوگیری از تکرار کد.
- استفاده از `async/await` و `Promise` برای مدیریت درخواست‌های API.
- استفاده از `localStorage` برای کش داده‌ها و بهبود عملکرد.
- مدیریت state و جریان داده‌ها بین صفحات مختلف.
